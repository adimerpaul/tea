import{c as J,C as X,az as ee,F as te,a as i,r as le,w as ae,aA as w,aB as ne,a5 as ie,h as k,aC as I,g as oe,U as N,_ as ue,Q as g,R as h,S as B,T as d,aw as se,V as n,Z as q,$ as re,a0 as de,ax as ce,W as F,aD as _}from"./index.81674d45.js";import{b as ge}from"./format.2cae61da.js";import{Q as me,a as P}from"./QMarkupTable.7e83da6c.js";import{Q as ve}from"./QPage.89e49c72.js";import{h as U}from"./moment.40bc58bf.js";function D(e,u){return[!0,!1].includes(e)?e:u}var fe=J({name:"QPagination",props:{...X,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||ee.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:u}){const{proxy:E}=oe(),{$q:m}=E,s=te(e,m),o=i(()=>parseInt(e.min,10)),t=i(()=>parseInt(e.max,10)),b=i(()=>parseInt(e.maxPages,10)),M=i(()=>f.value+" / "+t.value),Y=i(()=>D(e.boundaryLinks,e.input)),y=i(()=>D(e.boundaryNumbers,!e.input)),j=i(()=>D(e.directionLinks,e.input)),O=i(()=>D(e.ellipses,!e.input)),V=le(null),f=i({get:()=>e.modelValue,set:l=>{if(l=parseInt(l,10),e.disable||isNaN(l))return;const a=ge(l,o.value,t.value);e.modelValue!==a&&u("update:modelValue",a)}});ae(()=>`${o.value}|${t.value}`,()=>{f.value=e.modelValue});const z=i(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),A=i(()=>e.gutter in w?`${w[e.gutter]}px`:e.gutter||null),$=i(()=>A.value!==null?`--q-pagination-gutter-parent:-${A.value};--q-pagination-gutter-child:${A.value}`:null),C=i(()=>{const l=[e.iconFirst||m.iconSet.pagination.first,e.iconPrev||m.iconSet.pagination.prev,e.iconNext||m.iconSet.pagination.next,e.iconLast||m.iconSet.pagination.last];return m.lang.rtl===!0?l.reverse():l}),K=i(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),L=i(()=>ne(e,"flat")),R=i(()=>({[L.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),W=i(()=>{const l={[L.value]:!1};return e.activeDesign!==""&&(l[e.activeDesign]=!0),l}),G=i(()=>({...W.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),x=i(()=>{let l=Math.max(b.value,1+(O.value?2:0)+(y.value?2:0));const a={pgFrom:o.value,pgTo:t.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(t.value).length)}em`}};return b.value&&l<t.value-o.value+1&&(l=1+Math.floor(l/2)*2,a.pgFrom=Math.max(o.value,Math.min(t.value-l+1,e.modelValue-Math.floor(l/2))),a.pgTo=Math.min(t.value,a.pgFrom+l-1),y.value&&(a.boundaryStart=!0,a.pgFrom++),O.value&&a.pgFrom>o.value+(y.value?1:0)&&(a.ellipsesStart=!0,a.pgFrom++),y.value&&(a.boundaryEnd=!0,a.pgTo--),O.value&&a.pgTo<t.value-(y.value?1:0)&&(a.ellipsesEnd=!0,a.pgTo--)),a});function Q(l){f.value=l}function Z(l){f.value=f.value+l}const H=i(()=>{function l(){f.value=V.value,V.value=null}return{"onUpdate:modelValue":a=>{V.value=a},onKeyup:a=>{ie(a,13)===!0&&l()},onBlur:l}});function c(l,a,p){const v={"aria-label":a,"aria-current":"false",...R.value,...l};return p===!0&&Object.assign(v,{"aria-current":"true",...G.value}),a!==void 0&&(e.toFn!==void 0?v.to=e.toFn(a):v.onClick=()=>{Q(a)}),k(N,v)}return Object.assign(E,{set:Q,setByOffset:Z}),()=>{const l=[],a=[];let p;if(Y.value===!0&&(l.push(c({key:"bls",disable:e.disable||e.modelValue<=o.value,icon:C.value[0]},o.value)),a.unshift(c({key:"ble",disable:e.disable||e.modelValue>=t.value,icon:C.value[3]},t.value))),j.value===!0&&(l.push(c({key:"bdp",disable:e.disable||e.modelValue<=o.value,icon:C.value[1]},e.modelValue-1)),a.unshift(c({key:"bdn",disable:e.disable||e.modelValue>=t.value,icon:C.value[2]},e.modelValue+1))),e.input!==!0){p=[];const{pgFrom:v,pgTo:T,marginalStyle:S}=x.value;if(x.value.boundaryStart===!0){const r=o.value===e.modelValue;l.push(c({key:"bns",style:S,disable:e.disable,label:o.value},o.value,r))}if(x.value.boundaryEnd===!0){const r=t.value===e.modelValue;a.unshift(c({key:"bne",style:S,disable:e.disable,label:t.value},t.value,r))}x.value.ellipsesStart===!0&&l.push(c({key:"bes",style:S,disable:e.disable,label:"\u2026",ripple:!1},v-1)),x.value.ellipsesEnd===!0&&a.unshift(c({key:"bee",style:S,disable:e.disable,label:"\u2026",ripple:!1},T+1));for(let r=v;r<=T;r++)p.push(c({key:`bpg${r}`,style:S,disable:e.disable,label:r},r,r===e.modelValue))}return k("div",{class:z.value,...K.value},[k("div",{class:"q-pagination__content row no-wrap items-center",style:$.value},[...l,e.input===!0?k(I,{class:"inline",style:{width:`${M.value.length/1.5}em`},type:"number",dense:!0,value:V.value,disable:e.disable,dark:s.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:M.value,min:o.value,max:t.value,...H.value}):k("div",{class:"q-pagination__middle row justify-center"},p),...a])])}}});const he={name:"PrestamosIndex",data(){return{fechaInit:U().startOf("month").format("YYYY-MM-DD"),fechaFin:U().endOf("month").format("YYYY-MM-DD"),prestamos:[],loading:!1,filter:"",pagination:{page:1,last_page:1}}},mounted(){this.getPrestamos()},methods:{getPrestamos(){this.loading=!0,this.$axios.get("loans",{params:{fechaInit:this.fechaInit,fechaFin:this.fechaFin,filter:this.filter,page:this.pagination.page}}).then(e=>{this.prestamos=e.data.data,this.pagination.page=e.data.current_page,this.pagination.last_page=e.data.last_page}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})},show(e){this.$router.push("/prestamos/"+e.id)},create(){this.$router.push("/prestamos/create")},eliminar(e){this.$q.dialog({title:"Eliminar",message:"\xBFEst\xE1 seguro de eliminar el registro?",cancel:!0,persistent:!0}).onOk(()=>{this.$axios.delete("prestamos/"+e.id).then(u=>{this.getPrestamos()}).catch(u=>{console.log(u)})})}}},be={class:"row"},ye={class:"col-6 col-md-2"},xe={class:"col-6 col-md-2"},pe={class:"col-6 col-md-3"},Se={class:"col-6 col-md-2 flex flex-center"},ke={class:"col-6 col-md-3 text-right flex-center"},_e={class:"col-12 flex flex-center"},Pe={class:"col-12"},Ve=n("thead",null,[n("tr",null,[n("th",null,"Acciones"),n("th",null,"Id"),n("th",null,"Fecha"),n("th",null,"Cliente"),n("th",null,"Monto"),n("th",null,"Pendiente"),n("th",null,"Estado"),n("th",null,"Tipo")])],-1),Ce={class:"text-right"},Be=n("td",{class:"text-right"},null,-1);function Fe(e,u,E,m,s,o){return g(),h(ve,{class:"q-pa-xs bg-grey-3"},{default:B(()=>[d(ce,null,{default:B(()=>[d(se,null,{default:B(()=>[n("div",be,[n("div",ye,[d(I,{modelValue:s.fechaInit,"onUpdate:modelValue":u[0]||(u[0]=t=>s.fechaInit=t),label:"Fecha Inicio",dense:"",outlined:"",type:"date"},null,8,["modelValue"])]),n("div",xe,[d(I,{modelValue:s.fechaFin,"onUpdate:modelValue":u[1]||(u[1]=t=>s.fechaFin=t),label:"Fecha Fin",dense:"",outlined:"",type:"date"},null,8,["modelValue"])]),n("div",pe,[d(I,{modelValue:s.filter,"onUpdate:modelValue":u[2]||(u[2]=t=>s.filter=t),label:"Buscar",dense:"",outlined:""},null,8,["modelValue"])]),n("div",Se,[d(N,{color:"primary",label:"Buscar",onClick:o.getPrestamos,"no-caps":"",icon:"search",loading:s.loading},null,8,["onClick","loading"])]),n("div",ke,[d(N,{color:"green",label:"Nuevo",onClick:o.create,"no-caps":"",icon:"add_circle_outline",loading:s.loading},null,8,["onClick","loading"])]),n("div",_e,[d(fe,{modelValue:s.pagination.page,"onUpdate:modelValue":[u[3]||(u[3]=t=>s.pagination.page=t),o.getPrestamos],max:s.pagination.last_page,"boundary-numbers":"","max-pages":7},null,8,["modelValue","max","onUpdate:modelValue"])]),n("div",Pe,[d(me,{dense:"","wrap-cells":""},{default:B(()=>[Ve,n("tbody",null,[(g(!0),q(de,null,re(s.prestamos,t=>{var b;return g(),q("tr",{key:t.id},[n("td",null,[d(N,{color:"primary",icon:"visibility",onClick:M=>o.show(t),dense:"",size:"10px",label:"Detalle","no-caps":""},null,8,["onClick"])]),n("td",null,F(t.id),1),n("td",null,F(t.date),1),n("td",null,F((b=t.client)==null?void 0:b.name),1),n("td",Ce,F(t.amount),1),Be,n("td",null,[t.status=="PENDIENTE"?(g(),h(P,{key:0,label:"Pendiente","text-color":"white",dense:"",color:"orange"})):_("",!0),t.status=="PAGADO"?(g(),h(P,{key:1,label:"Pagado","text-color":"white",dense:"",color:"green"})):_("",!0),t.status=="ANULADO"?(g(),h(P,{key:2,label:"Anulado","text-color":"white",dense:"",color:"red"})):_("",!0)]),n("td",null,[t.currency=="DOLARES"?(g(),h(P,{key:0,label:"Dolares","text-color":"white",dense:"",color:"green-9"})):_("",!0),t.currency=="BOLIVIANOS"?(g(),h(P,{key:1,label:"Bolivianos","text-color":"white",dense:"",color:"indigo-9"})):_("",!0)])])}),128))])]),_:1})])])]),_:1})]),_:1})]),_:1})}var Oe=ue(he,[["render",Fe]]);export{Oe as default};
