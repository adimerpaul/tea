import{_ as Q,Q as m,R as p,S as d,T as l,L as c,am as f,Y as g,U as h,aD as a,aB as A,aA as y,V as n,W as D,b6 as v,aE as E,aF as x}from"./index.12ede94a.js";import{a as V,c as u,d as C}from"./format.c02bedfc.js";import{Q as S}from"./QList.b126a9fd.js";import{Q as w}from"./QBtnDropdown.559b7a0e.js";import{Q as O,a as U}from"./QTable.49baae54.js";import{Q as R}from"./QTooltip.43ed8085.js";import{Q as k}from"./QSpace.f3ca35a8.js";import{Q as N,a as B}from"./QForm.1473e525.js";import{Q as q}from"./QPage.87739120.js";import{C as b}from"./ClosePopup.2dc7e9f7.js";import"./position-engine.b922c68f.js";const P={name:"StudentsIndex.vue",data(){return{cursos:["PREKINDER","KINDER","1ER BASICO","2DO BASICO","3ER BASICO","4TO BASICO","5TO BASICO","6TO BASICO","7MO BASICO","8VO BASICO","1ER SECUNDARIA","2DO SECUNDARIA","3ER SECUNDARIA","4TO SECUNDARIA"],columns:[{name:"option",label:"Opciones",align:"left",field:t=>t.option},{name:"id",label:"ID",align:"left",field:t=>t.id},{name:"rut",label:"Rut",align:"left",field:t=>t.rut},{name:"name",label:"Nombre",align:"left",field:t=>t.name},{name:"birthdate",label:"Fecha de Nacimiento",align:"left",field:t=>t.birthdate},{name:"year_PIE",label:"A\xF1o PIE",align:"left",field:t=>t.year_PIE},{name:"course",label:"Curso",align:"left",field:t=>t.course},{name:"year",label:"A\xF1o",align:"left",field:t=>t.year},{name:"address",label:"Direcci\xF3n",align:"left",field:t=>t.address},{name:"phone",label:"Celular",align:"left",field:t=>t.phone}],loading:!1,students:[],student:{},studentDialog:!1,clienDialogHistory:!1,filter:"",passwordShow:!1}},mounted(){this.studentGet()},methods:{studentSave(){this.loading=!0,this.student.id?this.$axios.put(`students/${this.student.id}`,this.student).then(t=>{this.studentDialog=!1;const o=this.students.findIndex(i=>i.id===this.student.id);this.students.splice(o,1,t.data)}).catch(t=>{this.$alert.error(t.response.data.message)}).finally(()=>{this.loading=!1}):this.$axios.post("students",this.student).then(t=>{this.studentDialog=!1,this.students.unshift(t.data)}).catch(t=>{this.$alert.error(t.response.data.message)}).finally(()=>{this.loading=!1})},studentChangePassword(t){this.$alert.promptPassword("Ingrese la nueva contrase\xF1a").onOk(o=>{this.loading=!0,this.$axios.put(`passwordUpdate/${t.id}`,{password:o}).then(i=>{this.$alert.success("Contrase\xF1a cambiada con \xE9xito")}).catch(i=>{this.$alert.error(i.response.data.message)}).finally(()=>{this.loading=!1})})},studentHistory(t){this.$router.push("/students/history/"+t.id)},studentDelete(t){this.$alert.confirm("\xBFEst\xE1 seguro de eliminar este studente?").onOk(()=>{this.loading=!0,this.$axios.delete(`students/${t.id}`).then(o=>{const i=this.students.findIndex(_=>_.id===t.id);this.students.splice(i,1)}).catch(o=>{this.$alert.error(o.response.data.message)}).finally(()=>{this.loading=!1})})},studentEdit(t){this.studentDialog=!0,this.student={...t}},studentAdd(){this.studentDialog=!0,this.student={name:"",ci:"",birthdate:"",year_PIE:"",cource:"",year:"",address:"",phone:"",sex:"M"}},studentGet(){this.loading=!0,this.$axios.get("students").then(t=>{this.students=t.data}).catch(t=>{this.$alert.error(t.response.data.message)}).finally(()=>{this.loading=!1})}}},T={class:"text-h6"},F={class:"row"},H={class:"col-12 col-md-4"},M={class:"col-12 col-md-8"},G={class:"col-12 col-md-4"},L={class:"col-12 col-md-8"},K={class:"col-12 col-md-3"},z={class:"col-12 col-md-3"},W={class:"col-12 col-md-3"},Y={class:"col-12 col-md-3"},j={class:"col-12"},J={class:"col-12 col-md-6"},X={class:"col-12 col-md-6"};function Z(t,o,i,_,s,r){return m(),p(q,{class:"bg-grey-3 q-pa-md"},{default:d(()=>[l(U,{rows:s.students,columns:s.columns,title:"Estudiantes","rows-per-page-options":[0],"row-key":"id",dense:"",filter:s.filter,loading:s.loading},{"body-cell-option":d(e=>[l(O,{"auto-width":""},{default:d(()=>[l(w,{size:"sm",label:"Opciones","no-caps":"",color:"primary"},{default:d(()=>[l(S,null,{default:d(()=>[c((m(),p(V,{clickable:"",onClick:I=>r.studentEdit(e.row)},{default:d(()=>[l(u,{avatar:""},{default:d(()=>[l(f,{name:"edit"})]),_:1}),l(u,null,{default:d(()=>[l(C,null,{default:d(()=>[g("Editar")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[b]]),c((m(),p(V,{clickable:"",onClick:I=>r.studentDelete(e.row)},{default:d(()=>[l(u,{avatar:""},{default:d(()=>[l(f,{name:"delete"})]),_:1}),l(u,null,{default:d(()=>[l(C,null,{default:d(()=>[g("Eliminar")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[b]]),c((m(),p(V,{clickable:"",onClick:I=>r.studentHistory(e.row)},{default:d(()=>[l(u,{avatar:""},{default:d(()=>[l(f,{name:"history"})]),_:1}),l(u,null,{default:d(()=>[l(C,null,{default:d(()=>[g("Historial")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[b]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"top-right":d(()=>[l(h,{outline:"",dense:"",icon:"add_circle",onClick:r.studentAdd,label:"Agregar","no-caps":"",loading:s.loading},{default:d(()=>[l(R,null,{default:d(()=>[g("Agregar")]),_:1})]),_:1},8,["onClick","loading"]),l(a,{modelValue:s.filter,"onUpdate:modelValue":o[0]||(o[0]=e=>s.filter=e),dense:"",class:"q-ml-md",debounce:"300",placeholder:"Buscar",outlined:"",clearable:""},{append:d(()=>[l(f,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter","loading"]),l(x,{modelValue:s.studentDialog,"onUpdate:modelValue":o[14]||(o[14]=e=>s.studentDialog=e),persistent:""},{default:d(()=>[l(A,{style:{width:"750px","max-width":"90vw"}},{default:d(()=>[l(y,{class:"row items-center q-pb-none"},{default:d(()=>[n("div",T,D(s.student.id?"Editar":"Agregar")+" Estudiante",1),l(k),l(h,{flat:"",dense:"",icon:"close",onClick:o[1]||(o[1]=e=>s.studentDialog=!1)})]),_:1}),l(N,{onSubmit:r.studentSave},{default:d(()=>[l(y,null,{default:d(()=>[n("div",F,[n("div",H,[l(a,{modelValue:s.student.rut,"onUpdate:modelValue":o[2]||(o[2]=e=>s.student.rut=e),label:"Rut",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",M,[l(a,{modelValue:s.student.name,"onUpdate:modelValue":o[3]||(o[3]=e=>s.student.name=e),label:"Nombre Completo",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",G,[l(a,{modelValue:s.student.tutorRut,"onUpdate:modelValue":o[4]||(o[4]=e=>s.student.tutorRut=e),label:"Rut Tutor",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",L,[l(a,{modelValue:s.student.tutorName,"onUpdate:modelValue":o[5]||(o[5]=e=>s.student.tutorName=e),label:"Nombre Completo Tutor",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",K,[l(a,{modelValue:s.student.birthdate,"onUpdate:modelValue":o[6]||(o[6]=e=>s.student.birthdate=e),label:"Fecha de Nacimiento",type:"date",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",z,[l(a,{modelValue:s.student.year_PIE,"onUpdate:modelValue":o[7]||(o[7]=e=>s.student.year_PIE=e),label:"A\xF1o ingreso PIE",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",W,[l(B,{modelValue:s.student.course,"onUpdate:modelValue":o[8]||(o[8]=e=>s.student.course=e),label:"Curso",outlined:"",dense:"",options:s.cursos,rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","options","rules"])]),n("div",Y,[l(a,{modelValue:s.student.year,"onUpdate:modelValue":o[9]||(o[9]=e=>s.student.year=e),label:"A\xF1o",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",j,[l(a,{modelValue:s.student.address,"onUpdate:modelValue":o[10]||(o[10]=e=>s.student.address=e),label:"Direcci\xF3n",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",J,[l(a,{modelValue:s.student.phone,"onUpdate:modelValue":o[11]||(o[11]=e=>s.student.phone=e),type:"number",label:"Celular",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",X,[l(v,{modelValue:s.student.sex,"onUpdate:modelValue":o[12]||(o[12]=e=>s.student.sex=e),val:"M",label:"Masculino"},null,8,["modelValue"]),l(v,{modelValue:s.student.sex,"onUpdate:modelValue":o[13]||(o[13]=e=>s.student.sex=e),val:"F",label:"Femenino"},null,8,["modelValue"])])])]),_:1}),l(E,{align:"right"},{default:d(()=>[c(l(h,{flat:"",label:"Cancelar",loading:s.loading},null,8,["loading"]),[[b]]),l(h,{color:"primary",label:"Guardar",type:"submit",loading:s.loading},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var re=Q(P,[["render",Z]]);export{re as default};
