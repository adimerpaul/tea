import{_ as b,P as V,Q as s,R as r,S as i,T as a,aw as D,V as e,aC as c,U as F,Z as g,$ as I,a0 as k,ax as v,W as d,aD as u}from"./index.81674d45.js";import{Q as w,a as m}from"./QMarkupTable.7e83da6c.js";import{Q}from"./QPage.89e49c72.js";import{m as x}from"./moment.19647928.js";import{C as P}from"./CardShowComponent.aaeac08f.js";import"./QTooltip.9f714056.js";import"./position-engine.1911a128.js";import"./QItem.a3c85d71.js";const Y={name:"PaymentsIndex",components:{CardShowComponent:P},data(){return{loading:!1,fechaInit:x().startOf("month").format("YYYY-MM-DD"),fechaFin:x().endOf("month").format("YYYY-MM-DD"),filter:"",debtors:[]}},mounted(){this.debtorsGet()},methods:{debtorsGet(){this.loading=!0,this.$axios.get("payments",{params:{fechaInit:this.fechaInit,fechaFin:this.fechaFin,filter:this.filter}}).then(n=>{this.debtors=n.data}).catch(n=>{console.log(n)}).finally(()=>{this.loading=!1})}},computed:{total(){let n=0;return this.debtors.forEach(l=>{n+=parseFloat(l.total_bs)}),n}}},B={class:"row"},N={class:"col-6 col-md-2"},E={class:"col-6 col-md-2"},S={class:"col-6 col-md-3"},A={class:"col-6 col-md-3 flex flex-center"},M=e("div",{class:"col-6 col-md-2"},null,-1),U={class:"col-4"},q={class:"col-12"},G=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Nombre"),e("th",null,"Deuda"),e("th",null,"Fecha"),e("th",null,"Estado"),e("th",null,"Id")])],-1);function O(n,l,T,z,o,h){const C=V("CardShowComponent");return s(),r(Q,{class:"bg-grey-3 q-pa-xs"},{default:i(()=>[a(v,null,{default:i(()=>[a(D,null,{default:i(()=>[e("div",B,[e("div",N,[a(c,{modelValue:o.fechaInit,"onUpdate:modelValue":l[0]||(l[0]=t=>o.fechaInit=t),label:"Fecha Inicio",dense:"",outlined:"",type:"date"},null,8,["modelValue"])]),e("div",E,[a(c,{modelValue:o.fechaFin,"onUpdate:modelValue":l[1]||(l[1]=t=>o.fechaFin=t),label:"Fecha Fin",dense:"",outlined:"",type:"date"},null,8,["modelValue"])]),e("div",S,[a(c,{modelValue:o.filter,"onUpdate:modelValue":l[2]||(l[2]=t=>o.filter=t),label:"Buscar",dense:"",outlined:""},null,8,["modelValue"])]),e("div",A,[a(F,{color:"primary",label:"Buscar",onClick:h.debtorsGet,"no-caps":"",icon:"search",loading:o.loading},null,8,["onClick","loading"])]),M,e("div",U,[a(C,{monto:h.total,color:"green",title:"Deuda Total",icono:"o_trending_up"},null,8,["monto"])]),e("div",q,[a(w,{dense:"",separator:"cell","wrap-cells":""},{default:i(()=>[G,e("tbody",null,[(s(!0),g(k,null,I(o.debtors,(t,y)=>{var p,f,_;return s(),g("tr",{key:t.id},[e("td",null,d(y+1),1),e("td",null,d((f=(p=t.loan)==null?void 0:p.client)==null?void 0:f.name),1),e("td",null,d(t.total_bs),1),e("td",null,d(t.date),1),e("td",null,[t.status=="PENDIENTE"?(s(),r(m,{key:0,class:"q-ma-none",size:"10px",label:"Pendiente","text-color":"white",dense:"",color:"orange"})):u("",!0),t.status=="PAGADO"?(s(),r(m,{key:1,class:"q-ma-none",size:"10px",label:"Pagado","text-color":"white",dense:"",color:"green"})):u("",!0),t.status=="ANULADO"?(s(),r(m,{key:2,class:"q-ma-none",size:"10px",label:"Anulado","text-color":"white",dense:"",color:"red"})):u("",!0)]),e("td",null,d((_=t.loan)==null?void 0:_.id),1)])}),128))])]),_:1})])])]),_:1})]),_:1})]),_:1})}var X=b(Y,[["render",O]]);export{X as default};
